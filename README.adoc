= CDP Public Cloud Environment Setup on AWS

Author: *Pannag Katti*

:page-layout: docs
:description: CDP Public Cloud on Azure
:imagesdir: ./images
:icons: font
:toc:
:toc-placement!:
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:

toc::[]

This document provides all the required information for Cloudera Partners to setup a CDP Environment on Public Cloud. In addition to exploring different Data Services that run on containerized environment, this setup can also be used for any solution validation, certification, getting a Hands-on experience, or for any demos with potential customers. Here, you will get all the details for a quick-setup of a CDP environment on CDP Public Cloud with *AWS* as the provider for all the cloud resources. 

== Prerequisites

==== Access to a CDP tenant with PowerUser access

==== Access to the AWS account with administrator access.

==== AWS CLI

===== https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html[AWS CLI Installation Steps]

==== CDP access key and private key

* On the CDP Portal, click at the left bottom corner and click on Profile as shown below. 

image::profile.png[profile,180,200]

image::profile_1.png[profile1,290,220]

* Click on Generate Access Key as shown below. 

image::gen_access_key.png[access_key,900,200]

* Copy the values of Access Key ID and Secret Key separately. 

image::gen_access_key_1.png[access_key1,450,300]

== Steps

* Ensure you have aws cli configured in your PATH. Run the below command to confirm the same. You should get the version details of aws-cli. 

[.shell]
----
aws --version
----

* Clone this repository with the below command. 
[.shell]
----
git clone https://github.com/pannagk/CDP_Public_Cloud_on_AWS.git
----

* Run the below commands. 
[.shell]
----
cd CDP_Public_Cloud_on_AWS
rm -rf images Readme.adoc
chmod +x *.sh
----

* Open the file setup_params.sh and update all the values. 

[.shell]
----
vi setup_params.sh
----

   1. prefix="Enter a unique value for prefix for identifying resources" (example:- cdp-poc-aws)   
   2. aws_region="Enter a valid aws region in which CDP is also available"
   3. cdp_run_time="Enter CDP Runtime version" (7.2.16 is the latest. You can check with your Cloudera POC to verify this. )
   4. cdp_access_key_id="Enter the CDP access key id here"
   5. cdp_private_key="Enter the CDP private key here"

NOTE: You can check the CDP region availability https://docs.cloudera.com/cdp-public-cloud/cloud/requirements-aws/topics/cdp-control-plane-regions.html[here]. 

* Run the script with the below command. 
[.shell]
----
./cdp_setup_on_aws.sh
----

* The setup script executes the required steps for creation of CDP Environment in a sequence and you can see the output for each step. You can keep monitoring the logs of the script. If you encounter any error, take the screenshot or copy the error message and share it with the Cloudera POC you are working with. 
